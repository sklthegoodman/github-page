(function(e){function t(t){for(var r,s,i=t[0],c=t[1],u=t[2],d=0,f=[];d<i.length;d++)s=i[d],o[s]&&f.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={cvsGenerator:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([1,"chunk-vendors"]),n()})({1:function(e,t,n){e.exports=n("2f85")},"2f85":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.parseDoneMsg?n("div",{staticClass:"parse-done"},[n("p",{staticClass:"parse-done__p"},[e._v("\n            "+e._s(e.parseDoneMsg)+"\n        ")]),n("el-row",[n("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("\n                重新上传文件解析\n            ")])],1)],1):n("div",[n("div",{staticClass:"choose"},[n("el-radio-group",{on:{change:e.onChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("el-radio-button",{attrs:{label:"生成Sku"}}),n("el-radio-button",{attrs:{label:"开单"}})],1)],1),n("div",{staticClass:"content"},[e.radio==e.types["makeSku"]?n("makeSku"):e._e(),e.radio==e.types["makeOrder"]?n("makeOrder"):e._e()],1)])])},a=[],s=n("f59f"),i=n.n(s),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"upload"},[n("el-upload",{attrs:{drag:"",action:"#",accept:"text/csv","on-success":e.onSuccess,"on-error":e.onSuccess}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("\n                将CSV文件拖到此处，或"),n("em",[e._v("点击这里上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                上传之后将会生成三个CSV文件\n            ")])])],1)])},u=[],l=n("768b");n("28a5");function d(e){if(!e)return"";var t=e.split("\n");t=t.filter(function(e){return e});var n=t.map(function(e){return e.split(",")});return n}function f(e){var t=d(e),n=t.shift(),r=t.map(function(e){var t=e.reduce(function(e,t,r){var o=n[r];return e[o]=t,e},{});return t});return{title:n,body:r}}var p=n("90fe"),v=new r["default"],m={data:function(){return{fileList:[],goodList_Spec:"",goodList:"",goodList_Position:""}},methods:{onSuccess:function(e,t){var n=this,r=new FileReader;r.readAsText(t.raw,"gb2312"),r.onload=function(e){var t=f(e.target.result);console.log(t),p["b"].downloadAsFile(n.makeGoodList(t),"GoodList.csv","text/csv"),p["b"].downloadAsFile(n.makeGoodListSpec(t),"GoodList_Spec.csv","text/csv"),p["b"].downloadAsFile(n.makeGoodListPosition(t),"GoodList_Position.csv","text/csv"),v.$emit("parseDone",{msg:"解析完成，将会生成三个CSV文件"})},r.onerror=function(e){console.log(e)}},makeGoodList:function(e){var t=["货品编号","品名","主条码","货品分类","多规格","子编码","颜色","尺码","规格补充","设为独立编码","品牌ID","参考进价","参考售价","货品归属","重量(KG)","长(CM)","宽(CM)","高(CM)"],n=0,r=e.title[n],o=e.body.map(function(e){var n=e[r].split("-");n.length<3&&n.splice(1,0,"");var o=n[0],a=t.reduce(function(e,t){return e[t]="",e},{});return a=Object.assign(a,{"货品编号":o,"品名":o,"主条码":o+"-","货品分类":"-","多规格":1}),a}),a=new s["Parser"]({fields:t});return a.parse(o)},makeGoodListSpec:function(e){var t=["货品编号","子编码","颜色","尺码","规格补充","设为独立编码","更新"],n=0,r=e.title[n],o=e.body.map(function(e){var n=e[r].split("-");n.length<3&&n.splice(1,0,"");var o=Object(l["a"])(n,3),a=o[0],s=o[1],i=o[2],c=t.reduce(function(e,t){return e[t]="",e},{});return c=Object.assign(c,{"货品编号":a,"子编码":s?s+"-"+i:i,"颜色":s,"尺码":i}),c}),a=new s["Parser"]({fields:t});return a.parse(o)},makeGoodListPosition:function(e){var t=["所在仓库","条码","拣货货位","货位备注"],n=0,r=e.title[n],o=1,a=e.title[o],i=e.body.map(function(e){var n=e[r],o=e[a],s=t.reduce(function(e,t){return e[t]="",e},{});return s=Object.assign(s,{"所在仓库":"日本Q仓库离岸","条码":n,"拣货货位":o}),s}),c=new s["Parser"]({fields:t});return c.parse(i)}}},b=m,g=n("2877"),h=Object(g["a"])(b,c,u,!1,null,null,null),_=h.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload"},[n("el-upload",{attrs:{drag:"",action:"#",accept:"text/csv","on-success":e.onSuccess,"on-error":e.onSuccess}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("\n            将CSV文件拖到此处，或"),n("em",[e._v("点击这里上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n            解析之后将生成开单所需的csv\n        ")])])],1)},w=[],y=(n("a481"),{data:function(){return{fileList:[]}},methods:{onSuccess:function(e,t){var n=this,r=new FileReader;r.readAsText(t.raw,"gb2312"),r.onload=function(e){var t=f(e.target.result);console.log(t),p["b"].downloadAsFile(n.makeOrder(t),"order.csv","text/csv"),v.$emit("parseDone",{msg:"解析完成，将会生成开单文件"})},r.onerror=function(e){console.log(e)}},makeOrder:function(e){var t=this,n=["条码","数量","备注"],r=4,o=e.title[r],a=5,i=e.title[a],c=7,u=e.title[c],l=e.body.map(function(e){t.removeQuotation(e[o]);var n=t.removeQuotation(e[i]),r=t.removeQuotation(e[u]);return{"条码":n,"数量":r,"备注":""}}),d=new s["Parser"]({fields:n});return d.parse(l)},removeQuotation:function(e){return e.replace(/"/g,"")}}}),S=y,O=Object(g["a"])(S,k,w,!1,null,null,null),x=O.exports,C=i.a.Parser;console.log(C);var j=["car","price","color"],L=[{car:"Audi",price:4e4,color:"blue"},{car:"BMW",price:35e3,color:"black"},{car:"Porsche",price:6e4,color:"green"}],P=new C({fields:j}),M=P.parse(L);console.log(M);var G=new p["a"]({makeSku:"生成Sku",makeOrder:"开单"}),D={components:{makeSku:_,makeOrder:x},data:function(){return{radio:G["makeSku"],types:G,parseDoneMsg:""}},created:function(){var e=this;v.$on("parseDone",function(t){e.parseDoneMsg=t.msg||"解析完成"})},methods:{reset:function(){var e=this;e.parseDoneMsg=""},onChange:function(e){console.log(e)}}},A=D,F=(n("5dbf"),Object(g["a"])(A,o,a,!1,null,null,null)),$=F.exports,T=n("5c96"),Q=n.n(T);n("0fae");r["default"].use(Q.a),new r["default"]({render:function(e){return e($)}}).$mount("#app")},"41d7":function(e,t,n){},"5dbf":function(e,t,n){"use strict";var r=n("41d7"),o=n.n(r);o.a},"90fe":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n("d225"),o={ajax:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&(r.status>=200&&r.status<300||304==r.status?t(r.responseText):n(r.responseText))},r.open("get",e.url,!0),r.send(null)})},downloadAsFile:function(e,t,n){var r=document.createElement("a"),o=new Blob([e],{type:n});r.href=URL.createObjectURL(o),r.download=t,r.click()}},a=function e(t){if(Object(r["a"])(this,e),!t)return{};for(var n in t)this[this[n]=t[n]]=n}}});